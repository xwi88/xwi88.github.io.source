<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Mac 使用 minikube 替换 Docker Desktop - Coding Life Share</title><meta name="Description" content="MacOS 上使用 minikube 替换 Docker Desktop"><meta property="og:title" content="Mac 使用 minikube 替换 Docker Desktop" />
<meta property="og:description" content="MacOS 上使用 minikube 替换 Docker Desktop" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xwi88.com/mac-minikube-replace-docker-desktop/" /><meta property="og:image" content="https://xwi88.com/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-11T21:27:21+08:00" />
<meta property="article:modified_time" content="2022-03-15T21:25:51+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://xwi88.com/logo.png"/>

<meta name="twitter:title" content="Mac 使用 minikube 替换 Docker Desktop"/>
<meta name="twitter:description" content="MacOS 上使用 minikube 替换 Docker Desktop"/>
<meta name="application-name" content="XIN WANG blog">
<meta name="apple-mobile-web-app-title" content="XIN WANG blog"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://xwi88.com/mac-minikube-replace-docker-desktop/" /><link rel="prev" href="https://xwi88.com/git-common-config/" /><link rel="next" href="https://xwi88.com/makefile-shell-path-get/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.62747080dc83bde1a0ee9caa98bb236b6744d44fb76e885bd8929bcf018fb16c.css" integrity="sha256-YnRwgNyDveGg7pyqmLsja2dE1E&#43;3bohb2JKbzwGPsWw="><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Mac 使用 minikube 替换 Docker Desktop",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/xwi88.com\/mac-minikube-replace-docker-desktop\/"
        },"genre": "posts","keywords": "docker, k8s, env","wordcount":  2928 ,
        "url": "https:\/\/xwi88.com\/mac-minikube-replace-docker-desktop\/","datePublished": "2022-03-11T21:27:21+08:00","dateModified": "2022-03-15T21:25:51+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xwi88","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/xwi88.com\/images\/avatar.png",
                    "width":  1280 ,
                    "height":  1685 
                }},"author": {
                "@type": "Person",
                "name": "xwi88"
            },"description": "MacOS 上使用 minikube 替换 Docker Desktop"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Coding Life Share"><span class="header-title-pre"><i class='far fa-laugh-beam fa-fw'></i></span>xwi88&#39;s blog<span class="header-title-post"><i class='far fa-book fa'></i></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/categories/documentation/"> 文档 </a><a class="menu-item" href="/favorite/"> 收藏夹 </a><a class="menu-item" href="/about/"> 关于 </a><a class="menu-item" href="https://github.com/xwi88/xwi88.github.io" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="选择语言">简体中文<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/mac-minikube-replace-docker-desktop/" selected>简体中文</option></select>
                    </a><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Coding Life Share"><span class="header-title-pre"><i class='far fa-laugh-beam fa-fw'></i></span>xwi88&#39;s blog<span class="header-title-post"><i class='far fa-book fa'></i></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/categories/documentation/" title="">文档</a><a class="menu-item" href="/favorite/" title="">收藏夹</a><a class="menu-item" href="/about/" title="">关于</a><a class="menu-item" href="https://github.com/xwi88/xwi88.github.io" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="选择语言">简体中文<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/mac-minikube-replace-docker-desktop/" selected>简体中文</option></select>
                </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Mac 使用 minikube 替换 Docker Desktop</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://github.com/xwi88" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>xwi88</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/docker/"><i class="far fa-folder fa-fw"></i>docker</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-03-11">2022-03-11</time>&nbsp;<i class="far fa-calendar-check fa-fw"></i>&nbsp;<time datetime="2022-03-15">2022-03-15</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 2928 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 6 分钟&nbsp;
    

    
        

        
        
            <span id="busuanzi_container_value_page_pv"><i class="far fa-eye fa-fw"></i>
                
                <span id="busuanzi_value_page_pv"></span>&nbsp;次阅读</span>
        
    

</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#术语说明">术语说明</a></li>
    <li><a href="#docker-desktop-清理"><em>Docker Desktop</em> 清理</a></li>
    <li><a href="#环境要求">环境要求</a></li>
    <li><a href="#安装">安装</a></li>
    <li><a href="#检查安装">检查安装</a></li>
    <li><a href="#drivers-说明">Drivers 说明</a>
      <ul>
        <li><a href="#linux"><em>Linux</em></a></li>
        <li><a href="#macos"><strong>macOS</strong></a></li>
        <li><a href="#windows">Windows</a></li>
      </ul>
    </li>
    <li><a href="#启动">启动</a></li>
    <li><a href="#高级启动">高级启动</a>
      <ul>
        <li><a href="#启动命令">启动命令</a></li>
        <li><a href="#可能出现的问题">可能出现的问题</a></li>
        <li><a href="#启动后环境检查">启动后环境检查</a></li>
      </ul>
    </li>
    <li><a href="#镜像源修改">镜像源修改</a></li>
    <li><a href="#dashboard">Dashboard</a></li>
    <li><a href="#注意事项"><strong>注意事项</strong></a></li>
    <li><a href="#更多">更多</a></li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p><strong>Docker</strong> 公司于 <strong><a href="https://www.docker.com/blog/updating-product-subscriptions/" target="_blank" rel="noopener noreffer">2021-08-31 宣布</a></strong> <a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener noreffer">Docker Desktop</a> 对大型组织来说将不再是一个免费产品。为此我们需要寻找一个可以方便替换 <code>Docker Desktop</code> 且对我们工作影响较小的工具，如 <a href="https://minikube.sigs.k8s.io/docs/" target="_blank" rel="noopener noreffer">minikube</a>，<a href="https://github.com/moby/hyperkit" target="_blank" rel="noopener noreffer">Hyperkit</a>，<a href="https://podman.io/" target="_blank" rel="noopener noreffer">podman</a>。</p>
<blockquote>
<p><strong>版权声明</strong>：本文为博主 <strong><a href="https://github.com/xwi88" target="_blank" rel="noopener noreffer">xwi88</a></strong> 的原创文章，遵循 <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener noreffer">CC BY-NC 4.0</a> 版权协议，禁止商用，转载请注明出处，欢迎关注 <a href="https://github.com/xwi88" target="_blank" rel="noopener noreffer">https://github.com/xwi88</a></p>
</blockquote>
<h2 id="术语说明">术语说明</h2>
<ul>
<li><strong><a href="https://en.wikipedia.org/wiki/Docker,_Inc." target="_blank" rel="noopener noreffer">Docker Inc</a></strong> 一家总部设在美国的公司，开发了一些开源和非开源软件，这让开发、测试和在容器中运行应用更容易。</li>
<li><strong><a href="https://github.com/docker/engine" target="_blank" rel="noopener noreffer">Docker Engine</a></strong> Docker 背后的核心技术。它是一个作为守护进程运行在 Linux 上的开源软件，使在 Linux 内核上运行容器成为可能。它负责容器的生命周期和容器可以访问的物理资源(计算、内存、存储)的隔离。这个引擎可以在物理或者虚拟机上运行，但是它只能在 Linux 内核上运行，也就是说，在任何 Linux 风格的操作系统上。理解这一点很重要。<strong>Docker 引擎只能在 Linux 上运行</strong>。</li>
<li><strong><a href="https://github.com/docker/cli" target="_blank" rel="noopener noreffer">Docker CLI</a></strong> <em>CLI</em> 通常被开发人员用来与 docker 引擎交互。这包括 <code>docker</code> 和 <code>docker-compose</code> 命令。再次强调，这是一款开源软件。</li>
<li><strong><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener noreffer">Docker Desktop</a></strong> 由于 Docker Engine 只能在 Linux 上运行，使用 Windows 和 macOS 进行软件开发的开发人员只有在启动运行 Linux 的虚拟机(VM)之后才能运行该引擎。这就是 Docker Desktop 的用武之地。Docker Desktop 是一个专有软件，它允许 Windows/macOS 开发者在开发环境中无缝地使用容器技术，而无需管理操作 VM 的复杂性和随之而来的所有细节(网络、虚拟化、 linux 知识等)。Docker Desktop 是为了在软件开发过程中使用而设计的，<em>它在类似于生产环境的容器中不起作用</em>，在这种环境中只有 <code>Docker Engine</code> 参与。</li>
</ul>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>技巧<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">继续在 <strong>macOS</strong> 上运行和构建容器应用程序的方法是在 <code>Linux VM</code> 上运行 <code>Docker Engine</code>。</div>
        </div>
    </div>
<h2 id="docker-desktop-清理"><em>Docker Desktop</em> 清理</h2>
<blockquote>
<p><em>不建议直接在 <code>Docker Desktop</code> 或其他类似环境上运行 <code>minikube</code></em></p>
</blockquote>
<p><strong>Uninstall</strong> <code>Docker Desktop</code> by removing <code>/Applications/Docker.app</code>。</p>
<h2 id="环境要求">环境要求</h2>
<ul>
<li>最少 2核</li>
<li>最少 2GB 可用内存</li>
<li>最少 20GB 可用磁盘空间</li>
<li>网络连接</li>
<li>容器或虚拟机管理器, 如: <strong><a href="https://docs.docker.com/get-docker/" target="_blank" rel="noopener noreffer">Docker</a></strong>, <strong><a href="https://github.com/moby/hyperkit" target="_blank" rel="noopener noreffer">Hyperkit</a></strong>, Hyper-V, KVM, Parallels, <strong><a href="https://podman.io/" target="_blank" rel="noopener noreffer">podman</a></strong>, <em><a href="https://www.virtualbox.org/" target="_blank" rel="noopener noreffer">VirtualBox</a></em>, or VMware Fusion/Workstation</li>
</ul>
<h2 id="安装">安装</h2>
<div class="details admonition example open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ol fa-fw"></i>示例<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><blockquote>
<p>推荐 <a href="https://brew.sh/" target="_blank" rel="noopener noreffer">Homebrew</a> 方式安装</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">brew install docker
</span></span><span class="line"><span class="cl">brew install docker-compose <span class="c1"># 根据需要，可选安装</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">brew install hyperkit
</span></span><span class="line"><span class="cl">brew install minikube
</span></span></code></pre></td></tr></table>
</div>
</div><div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>技巧<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>如果通过 <em>brew</em> 安装 <code>minikube</code> 失败，可以尝试手动安装</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64
</span></span><span class="line"><span class="cl">sudo install minikube-darwin-amd64 /usr/local/bin/minikube
</span></span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
</div>
        </div>
    </div>
<h2 id="检查安装">检查安装</h2>
<p>执行 <code>which minikube</code></p>
<div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw"></i>警告<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>brew 方式安装后执行 <code>which minikube</code>，如果失败可执行以下命令</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">brew unlink minikube
</span></span><span class="line"><span class="cl">brew link minikube
</span></span></code></pre></td></tr></table>
</div>
</div><p><em>remove the old minikube links and link the newly installed binary</em></p>
</div>
        </div>
    </div>
<h2 id="drivers-说明">Drivers 说明</h2>
<blockquote>
<p><code>minikube</code> 在 mac 下启动需要依赖 <code>Linux VM</code>，这里也就是我们配置的 driver，如果你已经启动了 <code>Docker Desktop</code>，则可以配置为 <code>--driver=docker</code> 借助已经存在的 VM，否则需要选择其他，具体支持的 driver 参考如下：</p>
</blockquote>
<h3 id="linux"><em>Linux</em></h3>
<ul>
<li><strong><a href="https://minikube.sigs.k8s.io/docs/drivers/docker/" target="_blank" rel="noopener noreffer">Docker</a></strong> - container-based (preferred)</li>
<li>KVM2 - VM-based (preferred)</li>
<li>VirtualBox - VM</li>
<li><strong><a href="https://minikube.sigs.k8s.io/docs/drivers/none/" target="_blank" rel="noopener noreffer">None</a></strong> - bare-metal</li>
<li><strong><a href="https://minikube.sigs.k8s.io/docs/drivers/podman/" target="_blank" rel="noopener noreffer">Podman</a></strong> - container (experimental)</li>
<li>SSH - remote ssh</li>
</ul>
<h3 id="macos"><strong>macOS</strong></h3>
<ul>
<li><strong><a href="https://minikube.sigs.k8s.io/docs/drivers/docker/" target="_blank" rel="noopener noreffer">Docker</a></strong> - VM + Container (preferred)</li>
<li><strong><a href="https://minikube.sigs.k8s.io/docs/drivers/hyperkit/" target="_blank" rel="noopener noreffer">Hyperkit</a></strong> - VM</li>
<li>VirtualBox - VM</li>
<li>Parallels - VM</li>
<li>VMware Fusion - VM</li>
<li>SSH - remote ssh</li>
</ul>
<h3 id="windows">Windows</h3>
<ul>
<li><strong><a href="https://minikube.sigs.k8s.io/docs/drivers/hyperv/" target="_blank" rel="noopener noreffer">Hyper-V</a></strong> - VM (preferred)</li>
<li><strong><a href="https://minikube.sigs.k8s.io/docs/drivers/docker/" target="_blank" rel="noopener noreffer">Docker</a></strong> - VM + Container (preferred)</li>
<li>VirtualBox - VM</li>
<li>VMware Workstation - VM</li>
<li>SSH - remote ssh</li>
</ul>
<div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw"></i>警告<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>如果配置了 <code>--driver=docker</code> 需要区分 <strong><code>standard</code>, <code>rootless</code></strong> docker</p>
<blockquote>
<p><strong>Standard Docker</strong></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># need: install Docker 18.09 or higher</span>
</span></span><span class="line"><span class="cl"><span class="c1">#       amd64 or arm64 system.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Start a cluster using the docker driver:</span>
</span></span><span class="line"><span class="cl">minikube start --driver<span class="o">=</span>docker
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># To make docker the default driver:</span>
</span></span><span class="line"><span class="cl">minikube config <span class="nb">set</span> driver docker
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>Rootless Docker</strong></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Requirements</span>
</span></span><span class="line"><span class="cl"><span class="c1">#    Docker 20.10 or higher, see https://rootlesscontaine.rs/getting-started/docker/</span>
</span></span><span class="line"><span class="cl"><span class="c1">#    Cgroup v2 delegation, see https://rootlesscontaine.rs/getting-started/common/cgroup2/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">dockerd-rootless-setuptool.sh install -f
</span></span><span class="line"><span class="cl">docker context use rootless
</span></span><span class="line"><span class="cl">minikube start --driver<span class="o">=</span>docker --container-runtime<span class="o">=</span>containerd
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>The <code>--container-runtime</code> flag must be set to <code>containerd</code> or <code>cri-o</code>.</p>
</blockquote>
</div>
        </div>
    </div>
<blockquote>
<p>更多 <code>drivers</code> 配置及用法请查看: <a href="https://minikube.sigs.k8s.io/docs/drivers/" target="_blank" rel="noopener noreffer">minikube drivers</a></p>
</blockquote>
<h2 id="启动">启动</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">minikube start
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Tell Docker CLI to talk to minikube&#39;s VM</span>
</span></span><span class="line"><span class="cl"><span class="nb">eval</span> <span class="k">$(</span>minikube docker-env<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Save IP to a hostname</span>
</span></span><span class="line"><span class="cl"><span class="c1"># echo &#34;`minikube ip` docker.local&#34; | sudo tee -a /etc/hosts &gt; /dev/null</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># control panel, must start minikube with cluster model, without flag --no-kubernetes</span>
</span></span><span class="line"><span class="cl">minikube dashboard
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># test</span>
</span></span><span class="line"><span class="cl">docker run hello-world
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="高级启动">高级启动</h2>
<blockquote>
<p><strong><a href="https://minikube.sigs.k8s.io/docs/commands/start/" target="_blank" rel="noopener noreffer">commands start</a></strong></p>
</blockquote>
<h3 id="启动命令">启动命令</h3>
<div class="details admonition example open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ol fa-fw"></i>示例<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><blockquote>
<p><code>minikube start</code></p>
<p><code>minikube start --no-kubernetes --driver=docker --cpus=2 --memory=1800mb --image-mirror-country='auto'</code></p>
<p><code>minikube start --no-kubernetes --driver=docker --cpus=2 --memory=1800mb --image-mirror-country='cn'</code></p>
<p><code>minikube start --no-kubernetes --driver=docker --cpus=2 --memory=1800mb --insecure-registry=https://docker.mirrors.ustc.edu.cn,https://reg-mirror.qiniu.com,https://mirror.ccs.tencentyun.com</code> <strong>推荐使用类似配置，后续不用进入环境修改相关配置了</strong></p>
<p><code>minikube start --driver=docker --cpus=2 --memory=1800mb --insecure-registry=https://docker.mirrors.ustc.edu.cn,https://reg-mirror.qiniu.com,https://mirror.ccs.tencentyun.com</code> <em>如果要使用 minikube dashboard，可这样启动</em></p>
</blockquote>
</div>
        </div>
    </div>
<h3 id="可能出现的问题">可能出现的问题</h3>
<div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw"></i>警告<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p><em>我们这里仅提供演示，没有卸载掉 <code>Docker Desktop</code>，直接使用了它安装的</em>docker<em>及其配置。由于</em>资源限制<em>导致无法满足正常启动 <code>minikube</code> 出现了下面的提示</em></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tex" data-lang="tex"><span class="line"><span class="cl">😄  minikube v1.24.0 on Darwin 12.2.1
</span></span><span class="line"><span class="cl">✨  Using the docker driver based on existing profile
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">⛔  Docker Desktop only has 1986MiB available, you may encounter application deployment failures.
</span></span><span class="line"><span class="cl">💡  Suggestion:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    1. Click on &#34;Docker for Desktop&#34; menu icon
</span></span><span class="line"><span class="cl">    2. Click &#34;Preferences&#34;
</span></span><span class="line"><span class="cl">    3. Click &#34;Resources&#34;
</span></span><span class="line"><span class="cl">    4. Increase &#34;Memory&#34; slider bar to 2.25 GB or higher
</span></span><span class="line"><span class="cl">    5. Click &#34;Apply <span class="nb">&amp;</span> Restart&#34;
</span></span><span class="line"><span class="cl">📘  Documentation: https://docs.docker.com/docker-for-mac/#resources
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">❗  You cannot change the memory size for an existing minikube cluster. Please first delete the cluster.
</span></span><span class="line"><span class="cl">👍  Starting minikube without Kubernetes minikube in cluster minikube
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>minikube delete</code> <em>调整 docker 资源后，删除重建，重新启动即可</em></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tex" data-lang="tex"><span class="line"><span class="cl">🔥  Deleting &#34;minikube&#34; in docker ...
</span></span><span class="line"><span class="cl">🔥  Removing ~/.minikube/machines/minikube ...
</span></span><span class="line"><span class="cl">💀  Removed all traces of the &#34;minikube&#34; cluster.
</span></span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<h3 id="启动后环境检查">启动后环境检查</h3>
<blockquote>
<p><strong>如果需要使用 <code>dashboard</code>，请不要在启动参数添加 <code>--no-kubernetes</code></strong></p>
</blockquote>
<div class="details admonition example open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ol fa-fw"></i>示例<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><blockquote>
<p><code>minikube start --no-kubernetes --driver=docker --cpus=2 --memory=1800mb --insecure-registry=https://docker.mirrors.ustc.edu.cn,https://reg-mirror.qiniu.com,https://mirror.ccs.tencentyun.com</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tex" data-lang="tex"><span class="line"><span class="cl">😄  minikube v1.24.0 on Darwin 12.2.1
</span></span><span class="line"><span class="cl">✨  Using the docker driver based on user configuration
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">⛔  Docker Desktop only has 4180MiB available, you may encounter application deployment failures.
</span></span><span class="line"><span class="cl">💡  Suggestion:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    1. Click on &#34;Docker for Desktop&#34; menu icon
</span></span><span class="line"><span class="cl">    2. Click &#34;Preferences&#34;
</span></span><span class="line"><span class="cl">    3. Click &#34;Resources&#34;
</span></span><span class="line"><span class="cl">    4. Increase &#34;Memory&#34; slider bar to 2.25 GB or higher
</span></span><span class="line"><span class="cl">    5. Click &#34;Apply <span class="nb">&amp;</span> Restart&#34;
</span></span><span class="line"><span class="cl">📘  Documentation: https://docs.docker.com/docker-for-mac/#resources
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">👍  Starting minikube without Kubernetes minikube in cluster minikube
</span></span><span class="line"><span class="cl">🚜  Pulling base image ...
</span></span><span class="line"><span class="cl">❗  minikube was unable to download gcr.io/k8s-minikube/kicbase:v0.0.28, but successfully downloaded docker.io/kicbase/stable:v0.0.28 as a fallback image
</span></span><span class="line"><span class="cl">🔥  Creating docker container (CPUs=2, Memory=1800MB) ...
</span></span><span class="line"><span class="cl">🏄  Done! minikube is ready without Kubernetes!
</span></span><span class="line"><span class="cl">╭───────────────────────────────────────────────────────────────────────────────────────╮
</span></span><span class="line"><span class="cl">│                                                                                       │
</span></span><span class="line"><span class="cl">│                       💡  Things to try without Kubernetes ...                        │
</span></span><span class="line"><span class="cl">│                                                                                       │
</span></span><span class="line"><span class="cl">│    - &#34;minikube ssh&#34; to SSH into minikube&#39;s node.                                      │
</span></span><span class="line"><span class="cl">│    - &#34;minikube docker-env&#34; to point your docker-cli to the docker inside minikube.    │
</span></span><span class="line"><span class="cl">│    - &#34;minikube image&#34; to build images without docker.                                 │
</span></span><span class="line"><span class="cl">│                                                                                       │
</span></span><span class="line"><span class="cl">╰───────────────────────────────────────────────────────────────────────────────────────╯
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>eval $(minikube docker-env)</code> 让 Docker CLI 与 minikube&rsquo;s VM 交互</p>
</blockquote>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>技巧<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Add this line to <code>.bash_profile</code> or <code>.zshrc</code> or &hellip; if you want to <em>use minikube&rsquo;s daemon</em> by default (or if you do not want to set this every time you open a new terminal).</div>
        </div>
    </div>
<blockquote>
<p><code>docker info</code> 查看我们现在终端的 docker 信息</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tex" data-lang="tex"><span class="line"><span class="cl">Kernel Version: 5.10.76-linuxkit
</span></span><span class="line"><span class="cl">Operating System: Ubuntu 20.04.2 LTS
</span></span><span class="line"><span class="cl">OSType: linux
</span></span><span class="line"><span class="cl">Architecture: x86<span class="nb">_</span>64
</span></span><span class="line"><span class="cl">CPUs: 3
</span></span><span class="line"><span class="cl">Total Memory: 4.083GiB
</span></span><span class="line"><span class="cl">Name: minikube
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">No Proxy: control-plane.minikube.internal
</span></span><span class="line"><span class="cl"> Registry: https://index.docker.io/v1/
</span></span><span class="line"><span class="cl"> Labels:
</span></span><span class="line"><span class="cl">  provider=docker
</span></span><span class="line"><span class="cl"> Experimental: false
</span></span><span class="line"><span class="cl"> Insecure Registries:
</span></span><span class="line"><span class="cl">  docker.mirrors.ustc.edu.cn
</span></span><span class="line"><span class="cl">  mirror.ccs.tencentyun.com
</span></span><span class="line"><span class="cl">  reg-mirror.qiniu.com
</span></span><span class="line"><span class="cl">  10.96.0.0/12
</span></span><span class="line"><span class="cl">  127.0.0.0/8
</span></span><span class="line"><span class="cl"> Live Restore Enabled: false
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>新打开一个终端查看本机 <code>docker info</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tex" data-lang="tex"><span class="line"><span class="cl">Kernel Version: 5.10.76-linuxkit
</span></span><span class="line"><span class="cl">Operating System: Docker Desktop
</span></span><span class="line"><span class="cl">OSType: linux
</span></span><span class="line"><span class="cl">Architecture: x86<span class="nb">_</span>64
</span></span><span class="line"><span class="cl">CPUs: 3
</span></span><span class="line"><span class="cl">Total Memory: 4.083GiB
</span></span><span class="line"><span class="cl">Name: docker-desktop
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">HTTP Proxy: http.docker.internal:3128
</span></span><span class="line"><span class="cl"> HTTPS Proxy: http.docker.internal:3128
</span></span><span class="line"><span class="cl"> Registry: https://index.docker.io/v1/
</span></span><span class="line"><span class="cl"> Labels:
</span></span><span class="line"><span class="cl"> Experimental: false
</span></span><span class="line"><span class="cl"> Insecure Registries:
</span></span><span class="line"><span class="cl">  127.0.0.0/8
</span></span><span class="line"><span class="cl"> Registry Mirrors:
</span></span><span class="line"><span class="cl">  https://registry-1.docker.io/
</span></span><span class="line"><span class="cl">  https://hub-mirror.c.163.com/
</span></span><span class="line"><span class="cl">  https://mirror.baidubce.com/
</span></span><span class="line"><span class="cl">  https://registry.cn-hangzhou.aliyuncs.com/
</span></span><span class="line"><span class="cl">  https://docker.mirrors.ustc.edu.cn/
</span></span><span class="line"><span class="cl">  https://mirror.ccs.tencentyun.com/
</span></span><span class="line"><span class="cl">  https://registry.docker-cn.com/
</span></span><span class="line"><span class="cl">  https://reg-mirror.qiniu.com/
</span></span><span class="line"><span class="cl">  https://dockerhub.azk8s.cn/
</span></span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<h2 id="镜像源修改">镜像源修改</h2>
<blockquote>
<p><strong>不建议进入 minikube 环境做此修改</strong>，建议在启动时指定参数进行配置: <code>minikube start --image-mirror-country='cn'</code> 等参数， 详见 <a href="https://minikube.sigs.k8s.io/docs/commands/start/" target="_blank" rel="noopener noreffer">minikube start</a> 或 <a href="#%e9%ab%98%e7%ba%a7%e5%90%af%e5%8a%a8" rel="">高级启动</a></p>
</blockquote>
<div class="details admonition example open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ol fa-fw"></i>示例<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><blockquote>
<p><code>minikube ssh</code>  连入 minikube node</p>
<p><code>sudo mkdir -p /etc/docker</code> 创建 docker 目录</p>
<p><code>vi /etc/docker/daemon.json</code> 修改配置</p>
<p><code>daemon.json</code> <strong>daemon.json</strong> 配置</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;registry-mirrors&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;https://registry-1.docker.io&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;https://hub-mirror.c.163.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;https://mirror.baidubce.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;https://registry.cn-hangzhou.aliyuncs.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;http://f1361db2.m.daocloud.io&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;https://docker.mirrors.ustc.edu.cn&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;https://mirror.ccs.tencentyun.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;https://registry.docker-cn.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;https://reg-mirror.qiniu.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;https://dockerhub.azk8s.cn&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>sudo systemctl daemon-reload</code></p>
<p><code>sudo systemctl restart docker</code></p>
</blockquote>
</div>
        </div>
    </div>
<h2 id="dashboard">Dashboard</h2>
<p><code>minikube dashboard</code></p>
<div class="details admonition example open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ol fa-fw"></i>示例<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><blockquote>
<p><code>minikube start --driver=docker --cpus=2 --memory=1800mb --insecure-registry=https://docker.mirrors.ustc.edu.cn,https://reg-mirror.qiniu.com,https://mirror.ccs.tencentyun.com</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tex" data-lang="tex"><span class="line"><span class="cl">😄  minikube v1.24.0 on Darwin 12.2.1
</span></span><span class="line"><span class="cl">    ▪ MINIKUBE<span class="nb">_</span>ACTIVE<span class="nb">_</span>DOCKERD=minikube
</span></span><span class="line"><span class="cl">✨  Using the docker driver based on user configuration
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">⛔  Docker Desktop only has 4180MiB available, you may encounter application deployment failures.
</span></span><span class="line"><span class="cl">💡  Suggestion:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    1. Click on &#34;Docker for Desktop&#34; menu icon
</span></span><span class="line"><span class="cl">    2. Click &#34;Preferences&#34;
</span></span><span class="line"><span class="cl">    3. Click &#34;Resources&#34;
</span></span><span class="line"><span class="cl">    4. Increase &#34;Memory&#34; slider bar to 2.25 GB or higher
</span></span><span class="line"><span class="cl">    5. Click &#34;Apply <span class="nb">&amp;</span> Restart&#34;
</span></span><span class="line"><span class="cl">📘  Documentation: https://docs.docker.com/docker-for-mac/#resources
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">👍  Starting control plane node minikube in cluster minikube
</span></span><span class="line"><span class="cl">🚜  Pulling base image ...
</span></span><span class="line"><span class="cl">💾  Downloading Kubernetes v1.22.3 preload ...
</span></span><span class="line"><span class="cl">    &gt; preloaded-images-k8s-v13-v1...: 501.73 MiB / 501.73 MiB  100.00<span class="c">% 21.11 Mi
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl">❗  minikube was unable to download gcr.io/k8s-minikube/kicbase:v0.0.28, but successfully downloaded docker.io/kicbase/stable:v0.0.28 as a fallback image
</span></span><span class="line"><span class="cl">🔥  Creating docker container (CPUs=2, Memory=1800MB) ...
</span></span><span class="line"><span class="cl">❗  This container is having trouble accessing https://k8s.gcr.io
</span></span><span class="line"><span class="cl">💡  To pull new external images, you may need to configure a proxy: https://minikube.sigs.k8s.io/docs/reference/networking/proxy/
</span></span><span class="line"><span class="cl">🐳  Preparing Kubernetes v1.22.3 on Docker 20.10.8 ...
</span></span><span class="line"><span class="cl">    ▪ Generating certificates and keys ...
</span></span><span class="line"><span class="cl">    ▪ Booting up control plane ...
</span></span><span class="line"><span class="cl">    ▪ Configuring RBAC rules ...
</span></span><span class="line"><span class="cl">🔎  Verifying Kubernetes components...
</span></span><span class="line"><span class="cl">    ▪ Using image gcr.io/k8s-minikube/storage-provisioner:v5
</span></span><span class="line"><span class="cl">🌟  Enabled addons: storage-provisioner, default-storageclass
</span></span><span class="line"><span class="cl">🏄  Done! kubectl is now configured to use &#34;minikube&#34; cluster and &#34;default&#34; namespace by default
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>minikube dashboard</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tex" data-lang="tex"><span class="line"><span class="cl">🔌  Enabling dashboard ...
</span></span><span class="line"><span class="cl">    ▪ Using image kubernetesui/metrics-scraper:v1.0.7
</span></span><span class="line"><span class="cl">    ▪ Using image kubernetesui/dashboard:v2.3.1
</span></span><span class="line"><span class="cl">🤔  Verifying dashboard health ...
</span></span><span class="line"><span class="cl">🚀  Launching proxy ...
</span></span><span class="line"><span class="cl">🤔  Verifying proxy health ...
</span></span><span class="line"><span class="cl">🎉  Opening http://127.0.0.1:51816/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/ in your default browser...
</span></span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<h2 id="注意事项"><strong>注意事项</strong></h2>
<blockquote>
<p>如果你启动时指定 <strong>&ndash;driver=docker，且本机 <code>docker daemon</code></strong> 未运行，<em>可能出现以下错误</em></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tex" data-lang="tex"><span class="line"><span class="cl">😄  minikube v1.24.0 on Darwin 10.15.7
</span></span><span class="line"><span class="cl">    ▪ MINIKUBE<span class="nb">_</span>ACTIVE<span class="nb">_</span>DOCKERD=minikube
</span></span><span class="line"><span class="cl">✨  Using the docker driver based on user configuration
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">💣  Exiting due to PROVIDER<span class="nb">_</span>DOCKER<span class="nb">_</span>NOT<span class="nb">_</span>RUNNING: &#34;docker version --format -&#34; exit status 1: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?
</span></span><span class="line"><span class="cl">💡  Suggestion: Start the Docker service
</span></span><span class="line"><span class="cl">📘  Documentation: https://minikube.sigs.k8s.io/docs/drivers/docker/
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>使用 <code>driver=hyperkit</code> 启动即可</p>
</blockquote>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>技巧<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><blockquote>
<p><code>minikube start --no-kubernetes --driver=hyperkit --cpus=2 --memory=1800mb --insecure-registry=https://docker.mirrors.ustc.edu.cn,https://reg-mirror.qiniu.com,https://mirror.ccs.tencentyun.com</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tex" data-lang="tex"><span class="line"><span class="cl">😄  minikube v1.24.0 on Darwin 10.15.7
</span></span><span class="line"><span class="cl">    ▪ MINIKUBE<span class="nb">_</span>ACTIVE<span class="nb">_</span>DOCKERD=minikube
</span></span><span class="line"><span class="cl">✨  Using the hyperkit driver based on user configuration
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">⛔  Requested memory allocation (1800MB) is less than the recommended minimum 1900MB. Deployments may fail.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">👍  Starting minikube without Kubernetes minikube in cluster minikube
</span></span><span class="line"><span class="cl">🔥  Creating hyperkit VM (CPUs=2, Memory=1800MB, Disk=20000MB) ...
</span></span><span class="line"><span class="cl">🏄  Done! minikube is ready without Kubernetes!
</span></span><span class="line"><span class="cl">╭───────────────────────────────────────────────────────────────────────────────────────╮
</span></span><span class="line"><span class="cl">│                                                                                       │
</span></span><span class="line"><span class="cl">│                       💡  Things to try without Kubernetes ...                        │
</span></span><span class="line"><span class="cl">│                                                                                       │
</span></span><span class="line"><span class="cl">│    - &#34;minikube ssh&#34; to SSH into minikube&#39;s node.                                      │
</span></span><span class="line"><span class="cl">│    - &#34;minikube docker-env&#34; to point your docker-cli to the docker inside minikube.    │
</span></span><span class="line"><span class="cl">│    - &#34;minikube image&#34; to build images without docker.                                 │
</span></span><span class="line"><span class="cl">│                                                                                       │
</span></span><span class="line"><span class="cl">╰───────────────────────────────────────────────────────────────────────────────────────╯
</span></span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<h2 id="更多">更多</h2>
<ul>
<li><strong><a href="https://minikube.sigs.k8s.io/docs/tutorials/docker_desktop_replacement/" target="_blank" rel="noopener noreffer">Using minikube as Docker Desktop Replacement</a></strong></li>
<li><a href="https://minikube.sigs.k8s.io/docs/handbook/registry/" target="_blank" rel="noopener noreffer">How to interact with registries</a></li>
<li><a href="https://minikube.sigs.k8s.io/docs/commands/image/#minikube-image-build" target="_blank" rel="noopener noreffer">minikube-image-build</a></li>
<li><a href="https://github.com/containerd/containerd" target="_blank" rel="noopener noreffer">containerd</a></li>
</ul>
<h2 id="参考">参考</h2>
<ul>
<li><a href="https://dhwaneetbhatt.com/blog/run-docker-without-docker-desktop-on-macos" target="_blank" rel="noopener noreffer">run-docker-without-docker-desktop-on-macos</a></li>
<li><a href="https://minikube.sigs.k8s.io/docs/" target="_blank" rel="noopener noreffer">minikube docs</a></li>
</ul></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2022-03-15&nbsp;<a class="git-hash" href="https://github.com/xwi88/xwi88.github.io.source/commit/f336d2981617d8de86ede355b01c14b17244520b" target="_blank" title="commit by xwi88(278810732@qq.com) f336d2981617d8de86ede355b01c14b17244520b: update posts mac-minikube-replace-docker-desktop">
                                    <i class="fas fa-hashtag fa-fw"></i>f336d29</a></span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/mac-minikube-replace-docker-desktop/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://xwi88.com/mac-minikube-replace-docker-desktop/" data-title="Mac 使用 minikube 替换 Docker Desktop" data-via="xwi88" data-hashtags="docker,k8s,env"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://xwi88.com/mac-minikube-replace-docker-desktop/" data-hashtag="docker"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Linkedin" data-sharer="linkedin" data-url="https://xwi88.com/mac-minikube-replace-docker-desktop/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://xwi88.com/mac-minikube-replace-docker-desktop/" data-title="Mac 使用 minikube 替换 Docker Desktop"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Reddit" data-sharer="reddit" data-url="https://xwi88.com/mac-minikube-replace-docker-desktop/"><i class="fab fa-reddit fa-fw"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://xwi88.com/mac-minikube-replace-docker-desktop/" data-title="Mac 使用 minikube 替换 Docker Desktop"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/docker/">docker</a>,&nbsp;<a href="/tags/k8s/">k8s</a>,&nbsp;<a href="/tags/env/">env</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/git-common-config/" class="prev" rel="prev" title="Git 常用命令及配置"><i class="fas fa-angle-left fa-fw"></i>Git 常用命令及配置</a>
            <a href="/makefile-shell-path-get/" class="next" rel="next" title="Makefile shell 中绝对路径的正确处理">Makefile shell 中绝对路径的正确处理<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments">

            <div id="giscus" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://giscus.app">Giscus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-container">
    
        
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    

    
        
            <section>
                
                    <span id="busuanzi_container_value_site_pv"><i class="far fa-eye fa-fw"></i>
                        
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                

                
                    &nbsp;|&nbsp;              
                

                
                    <span id="busuanzi_container_value_site_uv"><i class="fa fa-user"></i>
                        
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
            </section>
        

        
        
    

</div>

            <div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://github.com/xwi88" target="_blank">xwi88</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br"/>
                    <span class="icp"><a href="https://beian.miit.gov.cn/">京ICP备2022005973号-1</a></span></div></div><script>
                var _hmt = _hmt || [];
                (function() {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?fbf6a686ad1adb0cda578bb59648c820";
                var s = document.getElementsByTagName("script")[0]; 
                s.parentNode.insertBefore(hm, s);
                })();
            </script>
            
            
            

            

            <script type="text/javascript" src="/js/L2Dwidget.min.js"></script>
            <script type="text/javascript" src="/js/L2Dwidget.0.min.js"></script>

            <script type="text/javascript">
                L2Dwidget.init({
                    model: {
                        scale: 1,
                        hHeadPos: 0.5,
                        vHeadPos: 0.618,
                        jsonPath: "https://cdn.jsdelivr.net/npm/live2d-widget-model-z16/assets/z16.model.json",  
                    },
                    display: {
                        superSample: 1,     
                        width: 120,         
                        height: 300,        
                        position: 'left',   
                        hOffset: 0,         
                        vOffset: 0,         
                    },
                    mobile: {
                        show: true,         
                        scale: 1,           
                        motion: true,       
                    },
                    react: {
                        opacityDefault: 1,  
                        opacityOnHover: 1,  
                    },
                });
            </script></footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.2.0/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":15},"comment":{"giscus":{"category":"Announcements","category_id":"DIC_kwDOG7xEcs4CN-KB","crossorigin":"anonymous","darkTheme":"dark","emit_metadata":"0","input_position":"top","lang":"en","lightTheme":"light","mapping":"pathname","reactions_enabled":"0","repo":"xwi88/hugo-comment","repo_id":"R_kgDOG7xEcg"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"algoliaAppID":"7QU1O7DMR5","algoliaIndex":"blog_index","algoliaSearchKey":"520c25090bf786368d0c1d0eaa14e57c","highlightTag":"em","maxResultLength":15,"noResultsFound":"没有找到结果","snippetLength":55,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.b75f7823ed815277b8be8f7b2c230cffa1f67c62aae6f5fdde56fd43eb6ddce0.js" integrity="sha256-t194I&#43;2BUne4vo97LCMM/6H2fGKq5vX93lb9Q&#43;tt3OA="></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-78W9SMKZVE', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-78W9SMKZVE" async></script></body>
</html>
