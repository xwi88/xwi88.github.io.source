class Util{forEach(e,t){e=e||[];for(let n=0;n<e.length;n++)t(e[n])}getScrollTop(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}isMobile(){return window.matchMedia("only screen and (max-width: 680px)").matches}isTocStatic(){return window.matchMedia("only screen and (max-width: 960px)").matches}animateCSS(t,e,o,n){Array.isArray(e)||(e=[e]),t.classList.add("animate__animated",...e);const s=()=>{t.classList.remove("animate__animated",...e),t.removeEventListener("animationend",s),"function"==typeof n&&n()};o||t.addEventListener("animationend",s,!1)}}class Theme{constructor(){this.config=window.config,this.data=this.config.data,this.isDark="dark"===document.body.getAttribute("theme"),this.util=new Util,this.newScrollTop=this.util.getScrollTop(),this.oldScrollTop=this.newScrollTop,this.scrollEventSet=new Set,this.resizeEventSet=new Set,this.switchThemeEventSet=new Set,this.clickMaskEventSet=new Set,window.objectFitImages&&objectFitImages()}initRaw(){this.util.forEach(document.querySelectorAll("[data-raw]"),e=>{e.innerHTML=this.data[e.id]})}initSVGIcon(){this.util.forEach(document.querySelectorAll("[data-svg-src]"),e=>{fetch(e.getAttribute("data-svg-src")).then(e=>e.text()).then(n=>{const s=document.createElement("div"),t=(s.insertAdjacentHTML("afterbegin",n),s.firstChild);t.setAttribute("data-svg-src",e.getAttribute("data-svg-src")),t.classList.add("icon"),n=t.getElementsByTagName("title"),n.length&&t.removeChild(n[0]),e.parentElement.replaceChild(t,e)}).catch(e=>{console.error(e)})})}initTwemoji(){this.config.twemoji&&twemoji.parse(document.body)}initMenuMobile(){const e=document.getElementById("menu-toggle-mobile"),t=document.getElementById("menu-mobile");e.addEventListener("click",()=>{document.body.classList.toggle("blur"),e.classList.toggle("active"),t.classList.toggle("active")},!1),this._menuMobileOnClickMask=this._menuMobileOnClickMask||(()=>{e.classList.remove("active"),t.classList.remove("active")}),this.clickMaskEventSet.add(this._menuMobileOnClickMask)}initSwitchTheme(){this.util.forEach(document.getElementsByClassName("theme-switch"),e=>{e.addEventListener("click",()=>{"dark"===document.body.getAttribute("theme")?document.body.setAttribute("theme","light"):document.body.setAttribute("theme","dark"),this.isDark=!this.isDark,window.localStorage&&localStorage.setItem("theme",this.isDark?"dark":"light");for(var e of this.switchThemeEventSet)e()},!1)})}initSearch(){const e=this.config.search,t=this.util.isMobile();if(!(!e||t&&this._searchMobileOnce||!t&&this._searchDesktopOnce)){const l=e.maxResultLength||10,c=e.snippetLength||50,o=e.highlightTag||"em",s=t?"mobile":"desktop",a=document.getElementById("header-"+s),r=document.getElementById("search-input-"+s),u=document.getElementById("search-toggle-"+s),i=document.getElementById("search-loading-"+s),n=document.getElementById("search-clear-"+s),d=(t?(this._searchMobileOnce=!0,r.addEventListener("focus",()=>{document.body.classList.add("blur"),a.classList.add("open")},!1),document.getElementById("search-cancel-mobile").addEventListener("click",()=>{a.classList.remove("open"),document.body.classList.remove("blur"),document.getElementById("menu-toggle-mobile").classList.remove("active"),document.getElementById("menu-mobile").classList.remove("active"),i.style.display="none",n.style.display="none",this._searchMobile&&this._searchMobile.autocomplete.setVal("")},!1),n.addEventListener("click",()=>{n.style.display="none",this._searchMobile&&this._searchMobile.autocomplete.setVal("")},!1),this._searchMobileOnClickMask=this._searchMobileOnClickMask||(()=>{a.classList.remove("open"),i.style.display="none",n.style.display="none",this._searchMobile&&this._searchMobile.autocomplete.setVal("")}),this.clickMaskEventSet.add(this._searchMobileOnClickMask)):(this._searchDesktopOnce=!0,u.addEventListener("click",()=>{document.body.classList.add("blur"),a.classList.add("open"),r.focus()},!1),n.addEventListener("click",()=>{n.style.display="none",this._searchDesktop&&this._searchDesktop.autocomplete.setVal("")},!1),this._searchDesktopOnClickMask=this._searchDesktopOnClickMask||(()=>{a.classList.remove("open"),i.style.display="none",n.style.display="none",this._searchDesktop&&this._searchDesktop.autocomplete.setVal("")}),this.clickMaskEventSet.add(this._searchDesktopOnClickMask)),r.addEventListener("input",()=>{""===r.value?n.style.display="none":n.style.display="inline"},!1),()=>{const a=autocomplete("#search-input-"+s,{hint:!1,autoselect:!0,dropdownMenuContainer:"#search-dropdown-"+s,clearOnSelected:!0,cssClasses:{noPrefix:!0},debug:!0},{name:"search",source:(s,a)=>{i.style.display="inline",n.style.display="none";const t=e=>{i.style.display="none",n.style.display="inline",a(e)};if("lunr"===e.type){const n=()=>{lunr.queryHandler&&(s=lunr.queryHandler(s));const e={};return this._index.search(s).forEach(({ref:n,matchData:{metadata:a}})=>{n=this._indexData[n];let{uri:s,title:i,content:t}=n;if(!e[s]){let r=0;Object.values(a).forEach(({content:e})=>{e&&((e=e.position[0][0])<r||0===r)&&(r=e)}),r-=c/5,t=0<r?(r+=t.substr(r,20).lastIndexOf(" ")+1,"..."+t.substr(r,c)):t.substr(0,c),Object.keys(a).forEach(e=>{i=i.replace(new RegExp(`(${e})`,"gi"),`<${o}>$1</${o}>`),t=t.replace(new RegExp(`(${e})`,"gi"),`<${o}>$1</${o}>`)}),e[s]={uri:s,title:i,date:n.date,context:t}}}),Object.values(e).slice(0,l)};this._index?t(n()):fetch(e.lunrIndexURL).then(e=>e.json()).then(o=>{const s={};this._index=lunr(function(){e.lunrLanguageCode&&this.use(lunr[e.lunrLanguageCode]),this.ref("objectID"),this.field("title",{boost:50}),this.field("tags",{boost:20}),this.field("categories",{boost:20}),this.field("content",{boost:10}),this.metadataWhitelist=["position"],o.forEach(e=>{s[e.objectID]=e,this.add(e)})}),this._indexData=s,t(n())}).catch(e=>{console.error(e),t([])})}else"algolia"===e.type&&(this._algoliaIndex=this._algoliaIndex||algoliasearch(e.algoliaAppID,e.algoliaSearchKey).initIndex(e.algoliaIndex),this._algoliaIndex.search(s,{offset:0,length:8*l,attributesToHighlight:["title"],attributesToSnippet:["content:"+c],highlightPreTag:`<${o}>`,highlightPostTag:`</${o}>`}).then(({hits:n})=>{const e={};n.forEach(({uri:t,date:s,_highlightResult:{title:o},_snippetResult:{content:n}})=>{e[t]&&e[t].context.length>n.value||(e[t]={uri:t,title:o.value,date:s,context:n.value})}),t(Object.values(e).slice(0,l))}).catch(e=>{console.error(e),t([])}))},templates:{suggestion:({title:e,date:t,context:n})=>`<div><span class="suggestion-title">${e}</span><span class="suggestion-date">${t}</span></div><div class="suggestion-context">${n}</div>`,empty:({query:t})=>`<div class="search-empty">${e.noResultsFound}: <span class="search-query">"${t}"</span></div>`,footer:({})=>{var{searchType:t,icon:n,href:s}="algolia"===e.type?{searchType:"algolia",icon:'<i class="fab fa-algolia fa-fw" aria-hidden="true"></i>',href:"https://www.algolia.com/"}:{searchType:"Lunr.js",icon:"",href:"https://lunrjs.com/"};return`<div class="search-footer">Search by <a href="${s}" rel="noopener noreffer" target="_blank">${n} ${t}</a></div>`}}});a.on("autocomplete:selected",(t,e)=>{window.location.assign(e.uri)}),t?this._searchMobile=a:this._searchDesktop=a});if(e.lunrSegmentitURL&&!document.getElementById("lunr-segmentit")){const t=document.createElement("script");t.id="lunr-segmentit",t.type="text/javascript",t.src=e.lunrSegmentitURL,t.async=!0,t.readyState?t.onreadystatechange=()=>{"loaded"!=t.readyState&&"complete"!=t.readyState||(t.onreadystatechange=null,d())}:t.onload=()=>{d()},document.body.appendChild(t)}else d()}}initDetails(){this.util.forEach(document.getElementsByClassName("details"),e=>{const t=e.getElementsByClassName("details-summary")[0];t.addEventListener("click",()=>{e.classList.toggle("open")},!1)})}initLightGallery(){this.config.lightgallery&&lightGallery(document.getElementById("content"),{plugins:[lgThumbnail,lgZoom],selector:".lightgallery",speed:400,hideBarsDelay:2e3,allowMediaOverlap:!0,exThumbImage:"data-thumbnail",toggleThumb:!0,thumbWidth:80,thumbHeight:"60px",actualSize:!1,showZoomInOutIcons:!0})}initHighlight(){this.util.forEach(document.querySelectorAll(".highlight > pre.chroma"),e=>{const t=document.createElement("div"),n=(t.className=e.className,document.createElement("table")),s=(t.appendChild(n),document.createElement("tbody")),o=(n.appendChild(s),document.createElement("tr")),i=(s.appendChild(o),document.createElement("td"));o.appendChild(i),e.parentElement.replaceChild(t,e),i.appendChild(e)}),this.util.forEach(document.querySelectorAll(".highlight > .chroma"),e=>{var t=e.querySelectorAll("pre.chroma > code");if(t.length){const a=t[t.length-1],s=document.createElement("div"),o=(s.className="code-header "+a.className.toLowerCase(),document.createElement("span")),i=(o.classList.add("code-title"),o.insertAdjacentHTML("afterbegin",'<i class="arrow fas fa-chevron-right fa-fw" aria-hidden="true"></i>'),o.addEventListener("click",()=>{e.classList.toggle("open")},!1),s.appendChild(o),document.createElement("span")),n=(i.insertAdjacentHTML("afterbegin",'<i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i>'),i.classList.add("ellipses"),i.addEventListener("click",()=>{e.classList.add("open")},!1),s.appendChild(i),document.createElement("span")),r=(n.insertAdjacentHTML("afterbegin",'<i class="far fa-copy fa-fw" aria-hidden="true"></i>'),n.classList.add("copy"),a.innerText);if((this.config.code.maxShownLines<0||r.split("\n").length<this.config.code.maxShownLines+2)&&e.classList.add("open"),this.config.code.copyTitle){n.setAttribute("data-clipboard-text",r),n.title=this.config.code.copyTitle;const e=new ClipboardJS(n);e.on("success",e=>{this.util.animateCSS(a,"animate__flash")}),s.appendChild(n)}e.insertBefore(s,e.firstChild)}})}initTable(){this.util.forEach(document.querySelectorAll(".content table"),e=>{const t=document.createElement("div");t.className="table-wrapper",e.parentElement.replaceChild(t,e),t.appendChild(e)})}initHeaderLink(){for(let e=1;e<=6;e++)this.util.forEach(document.querySelectorAll(".single .content > h"+e),e=>{e.classList.add("headerLink"),e.insertAdjacentHTML("afterbegin",`<a href="#${e.id}" class="header-mark"></a>`)})}initToc(){const e=document.getElementById("TableOfContents");if(null!==e)if(document.getElementById("toc-static").getAttribute("data-kept")||this.util.isTocStatic()){const t=document.getElementById("toc-content-static");e.parentElement!==t&&(e.parentElement.removeChild(e),t.appendChild(e)),this._tocOnScroll&&this.scrollEventSet.delete(this._tocOnScroll)}else{const c=document.getElementById("toc-content-auto"),n=(e.parentElement!==c&&(e.parentElement.removeChild(e),c.appendChild(e)),document.getElementById("toc-auto")),l=document.getElementsByClassName("page")[0];var t=l.getBoundingClientRect();n.style.left=t.left+t.width+20+"px",n.style.maxWidth=l.getBoundingClientRect().left-20+"px",n.style.visibility="visible";const r=e.querySelectorAll("a:first-child"),u=e.getElementsByTagName("li"),o=document.getElementsByClassName("headerLink"),s="normal"!==document.body.getAttribute("data-header-desktop"),i=document.getElementById("header-desktop").offsetHeight,a=20+(s?i:0),d=n.offsetTop,h=d-a+(s?0:i);this._tocOnScroll=this._tocOnScroll||(()=>{var l=document.getElementById("post-footer").offsetTop-n.getBoundingClientRect().height,f=l-a+(s?0:i),c=(this.newScrollTop<h?(n.style.position="absolute",n.style.top=d+"px"):this.newScrollTop>f?(n.style.position="absolute",n.style.top=l+"px"):(n.style.position="fixed",n.style.top=a+"px"),this.util.forEach(r,e=>{e.classList.remove("active")}),this.util.forEach(u,e=>{e.classList.remove("has-active")}),20+(s?i:0)),m,p;let t=o.length-1;for(let e=0;e<o.length-1;e++)if(m=o[e].getBoundingClientRect().top,p=o[e+1].getBoundingClientRect().top,0==e&&c<m||m<=c&&c<p){t=e;break}if(-1!==t){r[t].classList.add("active");let n=r[t].parentElement;for(;n!==e;)n.classList.add("has-active"),n=n.parentElement.parentElement}}),this._tocOnScroll(),this.scrollEventSet.add(this._tocOnScroll)}}initMath(){this.config.math&&renderMathInElement(document.body,this.config.math)}initMermaid(){this._mermaidOnSwitchTheme=this._mermaidOnSwitchTheme||(()=>{var e=document.getElementsByClassName("mermaid");e.length&&(mermaid.initialize({startOnLoad:!1,theme:this.isDark?"dark":"neutral",securityLevel:"loose"}),this.util.forEach(e,e=>{mermaid.render("svg-"+e.id,this.data[e.id],t=>{e.innerHTML=t},e)}))}),this.switchThemeEventSet.add(this._mermaidOnSwitchTheme),this._mermaidOnSwitchTheme()}initEcharts(){this.config.echarts&&(echarts.registerTheme("light",this.config.echarts.lightTheme),echarts.registerTheme("dark",this.config.echarts.darkTheme),this._echartsOnSwitchTheme=this._echartsOnSwitchTheme||(()=>{this._echartsArr=this._echartsArr||[];for(let e=0;e<this._echartsArr.length;e++)this._echartsArr[e].dispose();this._echartsArr=[],this.util.forEach(document.getElementsByClassName("echarts"),e=>{const t=echarts.init(e,this.isDark?"dark":"light",{renderer:"svg"});t.setOption(JSON.parse(this.data[e.id])),this._echartsArr.push(t)})}),this.switchThemeEventSet.add(this._echartsOnSwitchTheme),this._echartsOnSwitchTheme(),this._echartsOnResize=this._echartsOnResize||(()=>{for(let e=0;e<this._echartsArr.length;e++)this._echartsArr[e].resize()}),this.resizeEventSet.add(this._echartsOnResize))}initMapbox(){this.config.mapbox&&(mapboxgl.accessToken=this.config.mapbox.accessToken,mapboxgl.setRTLTextPlugin(this.config.mapbox.RTLTextPlugin),this._mapboxArr=this._mapboxArr||[],this.util.forEach(document.getElementsByClassName("mapbox"),t=>{var{lng:n,lat:s,zoom:o,lightStyle:i,darkStyle:u,marked:a,navigation:r,geolocate:c,scale:l,fullscreen:d}=this.data[t.id];const e=new mapboxgl.Map({container:t,center:[n,s],zoom:o,minZoom:.2,style:this.isDark?u:i,attributionControl:!1});a&&(new mapboxgl.Marker).setLngLat([n,s]).addTo(e),r&&e.addControl(new mapboxgl.NavigationControl,"bottom-right"),c&&e.addControl(new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showUserLocation:!0,trackUserLocation:!0}),"bottom-right"),l&&e.addControl(new mapboxgl.ScaleControl),d&&e.addControl(new mapboxgl.FullscreenControl),e.addControl(new MapboxLanguage),this._mapboxArr.push(e)}),this._mapboxOnSwitchTheme=this._mapboxOnSwitchTheme||(()=>{this.util.forEach(this._mapboxArr,e=>{var t=e.getContainer(),{lightStyle:t,darkStyle:n}=this.data[t.id];e.setStyle(this.isDark?n:t),e.addControl(new MapboxLanguage)})}),this.switchThemeEventSet.add(this._mapboxOnSwitchTheme))}initTypeit(){if(this.config.typeit){const e=this.config.typeit,t=e.speed||100,n=e.cursorSpeed||1e3,s=e.cursorChar||"|";Object.values(e.data).forEach(o=>{const i=a=>{var r=o[a];const c=new TypeIt("#"+r,{strings:this.data[r],speed:t,lifeLike:!0,cursorSpeed:n,cursorChar:s,waitUntilVisible:!0,afterComplete:()=>{a===o.length-1?0<=e.duration&&window.setTimeout(()=>{c.destroy()},e.duration):(c.destroy(),i(a+1))}}).go()};i(0)})}}initComment(){if(this.config.comment){if(this.config.comment.gitalk){this.config.comment.gitalk.body=decodeURI(window.location.href);const e=new Gitalk(this.config.comment.gitalk);e.render("gitalk")}if(this.config.comment.valine&&new Valine(this.config.comment.valine),this.config.comment.utterances){const t=this.config.comment.utterances,e=document.createElement("script");e.src="https://utteranc.es/client.js",e.type="text/javascript",e.setAttribute("repo",t.repo),e.setAttribute("issue-term",t.issueTerm),t.label&&e.setAttribute("label",t.label),e.setAttribute("theme",this.isDark?t.darkTheme:t.lightTheme),e.crossOrigin="anonymous",e.async=!0,document.getElementById("utterances").appendChild(e),this._utterancesOnSwitchTheme=this._utterancesOnSwitchTheme||(()=>{var e={type:"set-theme",theme:this.isDark?t.darkTheme:t.lightTheme};const n=document.querySelector(".utterances-frame");n.contentWindow.postMessage(e,"https://utteranc.es")}),this.switchThemeEventSet.add(this._utterancesOnSwitchTheme)}if(this.config.comment.giscus){const t=this.config.comment.giscus,e=document.createElement("script");let n=this.isDark?t.darkTheme:t.lightTheme;e.src="https://giscus.app/client.js",e.type="text/javascript",e.setAttribute("data-repo",t.repo),e.setAttribute("data-repo-id",t.repo_id),e.setAttribute("data-category",t.category),e.setAttribute("data-category-id",t.category_id),e.setAttribute("data-mapping",t.mapping),e.setAttribute("data-reactions-enabled",t.reactions_enabled),e.setAttribute("data-emit-metadata",t.emit_metadata),e.setAttribute("data-input-position",t.input_position),e.setAttribute("data-lang",t.lang),t.label&&e.setAttribute("label",t.label),e.setAttribute("data-theme",n),e.crossOrigin="anonymous",e.async=!0,document.getElementById("giscus").appendChild(e),this._giscusOnSwitchTheme=this._giscusOnSwitchTheme||(()=>{var s={setConfig:{theme:n=this.isDark?t.darkTheme:t.lightTheme,reactionsEnabled:!1}};const e=document.querySelector("iframe.giscus-frame");e&&e.contentWindow.postMessage({giscus:s},"https://giscus.app")}),this.switchThemeEventSet.add(this._giscusOnSwitchTheme)}}}initCookieconsent(){this.config.cookieconsent&&cookieconsent.initialise(this.config.cookieconsent)}onScroll(){const t=[];if("auto"===document.body.getAttribute("data-header-desktop")&&t.push(document.getElementById("header-desktop")),"auto"===document.body.getAttribute("data-header-mobile")&&t.push(document.getElementById("header-mobile")),document.getElementById("comments")){const e=document.getElementById("view-comments");e.href="#comments",e.style.display="block"}const e=document.getElementById("fixed-buttons");window.addEventListener("scroll",()=>{this.newScrollTop=this.util.getScrollTop();const n=this.newScrollTop-this.oldScrollTop;var o,s=this.util.isMobile();this.util.forEach(t,e=>{20<n?(e.classList.remove("animate__fadeInDown"),this.util.animateCSS(e,["animate__fadeOutUp","animate__faster"],!0)):n<-20&&(e.classList.remove("animate__fadeOutUp"),this.util.animateCSS(e,["animate__fadeInDown","animate__faster"],!0))}),100<this.newScrollTop?s&&20<n?(e.classList.remove("animate__fadeIn"),this.util.animateCSS(e,["animate__fadeOut","animate__faster"],!0)):(!s||n<-20)&&(e.style.display="block",e.classList.remove("animate__fadeOut"),this.util.animateCSS(e,["animate__fadeIn","animate__faster"],!0)):(s||(e.classList.remove("animate__fadeIn"),this.util.animateCSS(e,["animate__fadeOut","animate__faster"],!0)),e.style.display="none");for(o of this.scrollEventSet)o();this.oldScrollTop=this.newScrollTop},!1)}onResize(){window.addEventListener("resize",()=>{this._resizeTimeout||(this._resizeTimeout=window.setTimeout(()=>{this._resizeTimeout=null;for(var e of this.resizeEventSet)e();this.initToc(),this.initMermaid(),this.initSearch()},100))},!1)}onClickMask(){document.getElementById("mask").addEventListener("click",()=>{for(var e of this.clickMaskEventSet)e();document.body.classList.remove("blur")},!1)}init(){try{this.initRaw(),this.initSVGIcon(),this.initTwemoji(),this.initMenuMobile(),this.initSwitchTheme(),this.initSearch(),this.initDetails(),this.initLightGallery(),this.initHighlight(),this.initTable(),this.initHeaderLink(),this.initMath(),this.initMermaid(),this.initEcharts(),this.initTypeit(),this.initMapbox(),this.initCookieconsent()}catch(e){console.error(e)}window.setTimeout(()=>{this.initToc(),this.initComment(),this.onScroll(),this.onResize(),this.onClickMask()},100)}}const themeInit=()=>{const e=new Theme;e.init()};"loading"!==document.readyState?themeInit():document.addEventListener("DOMContentLoaded",themeInit,!1)